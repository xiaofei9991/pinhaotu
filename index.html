<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Picgle - Free Online Image Decomposition & Blending Tool | Advanced Photo Editor</title>
    <meta name="description" content="Transform your images with Picgle's powerful decomposition and blending tools. Create stunning visual effects using Voronoi patterns, layer blending, and advanced image processing - completely free online.">
    <meta name="keywords" content="image processing, image decomposition, image blending, Voronoi, online image editor, photo editor, image layers, free photo editing">
    <meta name="author" content="Picgle">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.picgle.org">
    <meta property="og:title" content="Picgle - Advanced Image Processing Tool">
    <meta property="og:description" content="Free online image decomposition and blending tool with advanced features">
    <meta property="og:image" content="https://www.picgle.org/og-image.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.picgle.org">
    <meta property="twitter:title" content="Picgle - Advanced Image Processing Tool">
    <meta property="twitter:description" content="Free online image decomposition and blending tool with advanced features">
    <meta property="twitter:image" content="https://www.picgle.org/og-image.jpg">

    <link rel="canonical" href="https://www.picgle.org">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#3b82f6',
                        'primary-dark': '#2563eb',
                        'success': '#10b981',
                        'success-dark': '#059669',
                    }
                }
            }
        }
    </script>
    
    <!-- JSZip for ZIP downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Progress Overlay -->
    <div id="progressOverlay" class="progress-overlay">
        <div class="progress-content">
            <h3 class="text-lg font-semibold mb-3">Processing...</h3>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <p id="progressText" class="progress-text">Please wait...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 mobile-compact-header">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl sm:text-3xl font-bold text-primary">Picgle</h1>
                <nav class="hidden md:flex space-x-6">
                    <button onclick="showTab('decompose')" id="decomposeTab" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200 border-b-2 border-primary">
                        Decompose
                    </button>
                    <button onclick="showTab('blend')" id="blendTab" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200">
                        Blend
                    </button>
                    <button onclick="showTab('help')" id="helpTab" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200">
                        How to Use
                    </button>
                    <button onclick="showTab('about')" id="aboutTab" class="text-gray-700 hover:text-primary font-medium transition-colors duration-200">
                        About
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="md:hidden bg-white border-b">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex space-x-2 py-2 overflow-x-auto">
                <button onclick="showTab('decompose')" id="decomposeTabMobile" class="flex-1 py-2 px-3 text-center text-sm font-medium text-primary border-b-2 border-primary whitespace-nowrap">
                    Decompose
                </button>
                <button onclick="showTab('blend')" id="blendTabMobile" class="flex-1 py-2 px-3 text-center text-sm font-medium text-gray-500 whitespace-nowrap">
                    Blend
                </button>
                <button onclick="showTab('help')" id="helpTabMobile" class="flex-1 py-2 px-3 text-center text-sm font-medium text-gray-500 whitespace-nowrap">
                    Help
                </button>
                <button onclick="showTab('about')" id="aboutTabMobile" class="flex-1 py-2 px-3 text-center text-sm font-medium text-gray-500 whitespace-nowrap">
                    About
                </button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeShareModal()">&times;</span>
            <h2 class="text-xl font-bold mb-4">Share Picgle to unlock more pieces!</h2>
            <p class="text-gray-600 mb-4">Help us spread the word and unlock the ability to create 5-100 pieces instead of the default 5-15 limit.</p>
            <div class="social-buttons">
                <a href="#" class="social-btn twitter" onclick="shareToTwitter()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>
                    Twitter
                </a>
                <a href="#" class="social-btn facebook" onclick="shareToFacebook()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    Facebook
                </a>
                <a href="#" class="social-btn linkedin" onclick="shareToLinkedIn()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                    LinkedIn
                </a>
                <a href="#" class="social-btn reddit" onclick="shareToReddit()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
                    Reddit
                </a>
                <a href="#" class="social-btn telegram" onclick="shareToTelegram()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                    Telegram
                </a>
                <a href="#" class="social-btn whatsapp" onclick="shareToWhatsApp()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/></svg>
                    WhatsApp
                </a>
            </div>
            <div class="mt-4 p-4 bg-gray-100 rounded-lg">
                <p class="text-sm text-gray-600">After sharing, come back and the advanced limits will be unlocked automatically!</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8">
        <!-- Decompose Tab -->
        <div id="decomposeContent" class="tab-content">
            <div class="mb-6 sm:mb-8 text-center">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-4">Image Decomposition Tool</h2>
                <p class="text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">Break down your images into multiple layers using blocks or Voronoi patterns. Perfect for creating artistic effects and unique compositions.</p>
            </div>

            <div class="mobile-stack lg:grid lg:grid-cols-4 gap-8">
                <!-- Controls Panel -->
                <div class="lg:col-span-1 mb-6 lg:mb-0">
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mobile-sticky-controls lg:sticky lg:top-8">
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6">Settings</h3>
                        
                        <!-- Upload -->
                        <div class="mb-4 sm:mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Image</label>
                            <div class="custom-file-input">
                                <input type="file" id="decomposeImageLoader" accept="image/*">
                                <label for="decomposeImageLoader" class="custom-file-label" id="decomposeFileLabel">
                                    <svg class="file-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <span class="file-text">Choose File</span>
                                </label>
                            </div>
                        </div>

                        <!-- Number of Pieces -->
                        <div class="mb-4 sm:mb-6">
                            <label for="numPieces" id="numPiecesLabel" class="block text-sm font-medium text-gray-700 mb-2">Number of Pieces (5-15)</label>
                            <input type="number" id="numPieces" value="10" min="5" max="15" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Unlock Advanced -->
                        <div class="mb-4 sm:mb-6" id="advancedUnlockGroup">
                            <button id="unlockAdvancedDecomposeButton" class="w-full px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors duration-200 text-sm mobile-text-sm">
                                ðŸš€ Share to unlock 5-100 pieces!
                            </button>
                        </div>

                        <!-- Shape Type -->
                        <div class="mb-4 sm:mb-6">
                            <fieldset class="border border-gray-300 rounded-md p-3 sm:p-4">
                                <legend class="text-sm font-medium text-gray-700 px-2">Decomposition Shape</legend>
                                <div class="flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0 mt-2">
                                    <label class="flex items-center">
                                        <input type="radio" name="shapeType" value="blocks" checked class="mr-2 text-primary focus:ring-primary">
                                        <span class="text-sm">Blocks</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="radio" name="shapeType" value="voronoi" class="mr-2 text-primary focus:ring-primary">
                                        <span class="text-sm">Voronoi</span>
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <!-- Block Size -->
                        <div class="mb-4 sm:mb-6" id="blockSizeGroup">
                            <label for="blockSize" class="block text-sm font-medium text-gray-700 mb-2">Block Size (pixels, 1 = smallest)</label>
                            <input type="number" id="blockSize" value="10" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Voronoi Seeds -->
                        <div class="mb-4 sm:mb-6 hidden" id="voronoiSeedsGroup">
                            <label for="voronoiSeeds" class="block text-sm font-medium text-gray-700 mb-2">Voronoi Seed Points (500-10000)</label>
                            <input type="number" id="voronoiSeeds" value="1000" min="500" max="10000" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>

                        <!-- Background -->
                        <div class="mb-4 sm:mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background</label>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mobile-button-stack">
                                <button class="bg-btn flex-1 px-3 py-2 text-sm bg-primary text-white rounded-md" data-bg="transparent">Transparent</button>
                                <button class="bg-btn flex-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200" data-bg="white">White</button>
                                <button class="bg-btn flex-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200" data-bg="black">Black</button>
                            </div>
                        </div>

                        <!-- Color Processing -->
                        <div class="mb-4 sm:mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Color Processing</label>
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mobile-button-stack">
                                <button id="colorNormalButton" class="toggle-btn flex-1 px-3 py-2 text-sm bg-primary text-white rounded-md" data-invert="false">Normal</button>
                                <button id="colorInvertButton" class="toggle-btn flex-1 px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200" data-invert="true">Inverted</button>
                            </div>
                        </div>

                        <!-- Watermark Toggle -->
                        <div class="mb-4 sm:mb-6">
                            <label class="flex items-center">
                                <input type="checkbox" id="decomposeWatermarkToggle" checked class="mr-2 text-primary focus:ring-primary">
                                <span class="text-sm font-medium text-gray-700">Add Picgle watermark</span>
                            </label>
                        </div>

                        <!-- Decompose Button -->
                        <button id="decomposeButton" class="w-full px-4 py-3 bg-success text-white rounded-md font-medium hover:bg-success-dark transition-colors duration-200 flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <span>Start Decomposition</span>
                        </button>
                    </div>
                </div>

                <!-- Preview Area -->
                <div class="lg:col-span-3 space-y-6 sm:space-y-8">
                    <!-- Original Image -->
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4">Original Image</h3>
                        <div class="flex justify-center items-center bg-gray-100 rounded-lg min-h-[150px] sm:min-h-[200px] mobile-preview-container p-4">
                            <div class="watermark-container">
                                <canvas id="originalImageCanvas" class="transparent-bg max-w-full max-h-[200px] sm:max-h-[300px] mobile-canvas rounded border" alt="Original uploaded image"></canvas>
                                <div id="originalWatermark" class="watermark" style="display: none;">Picgle</div>
                            </div>
                        </div>
                    </div>

                    <!-- Decomposed Layers -->
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-base sm:text-lg font-semibold text-gray-900">Decomposed Layers</h3>
                            <button id="downloadAllZipBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 items-center gap-2 text-sm" style="display: none;">
                                <svg class="w-4 h-4 inline-block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                Download All as ZIP
                            </button>
                        </div>
                        <div id="decomposedImagesContainer" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 mobile-grid gap-3 sm:gap-4">
                            <!-- Decomposed images will appear here -->
                        </div>
                    </div>

                    <!-- Merged Preview -->
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4">Merged Preview <span id="blendModeInfo" class="text-sm text-gray-500 font-normal"></span></h3>
                        <div class="flex justify-center items-center bg-gray-100 rounded-lg min-h-[150px] sm:min-h-[200px] mobile-preview-container p-4">
                            <canvas id="recombinedCanvas" class="transparent-bg max-w-full max-h-[200px] sm:max-h-[300px] mobile-canvas rounded border" alt="Merged preview of decomposed layers"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blend Tab -->
        <div id="blendContent" class="tab-content hidden">
            <div class="mb-6 sm:mb-8 text-center">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-4">Image Blending & Layer Editor</h2>
                <p class="text-sm sm:text-base text-gray-600 max-w-2xl mx-auto">Upload multiple images and blend them together using various blend modes. Create stunning compositions with layer management and color effects.</p>
            </div>

            <div class="mobile-stack lg:grid lg:grid-cols-3 gap-8">
                <!-- Controls Panel -->
                <div class="lg:col-span-1 mb-6 lg:mb-0">
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6 mobile-sticky-controls lg:sticky lg:top-8">
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6">Blend Settings</h3>
                        
                        <!-- Upload Multiple -->
                        <div class="mb-4 sm:mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Images (Multiple)</label>
                            <div class="custom-file-input">
                                <input type="file" id="blendImageUpload" multiple accept="image/*">
                                <label for="blendImageUpload" class="custom-file-label" id="blendFileLabel">
                                    <svg class="file-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <span class="file-text">Choose Files</span>
                                </label>
                            </div>
                        </div>

                        <!-- Watermark Toggle -->
                        <div class="mb-4 sm:mb-6">
                            <label class="flex items-center">
                                <input type="checkbox" id="blendWatermarkToggle" checked class="mr-2 text-primary focus:ring-primary">
                                <span class="text-sm font-medium text-gray-700">Add Picgle watermark</span>
                            </label>
                        </div>

                        <!-- Clear All -->
                        <div class="mb-4 sm:mb-6 space-y-2">
                            <button id="clearAllBtn" class="w-full px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors duration-200">
                                Clear All Images
                            </button>
                        </div>

                        <!-- Blend Modes -->
                        <div class="mb-4 sm:mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">Blend Modes</h4>
                            <div class="space-y-2 mb-4">
                                <button id="whiteBgMultiplyBtn" class="toggle-button w-full px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200">
                                    White Background (Multiply)
                                </button>
                                <button id="blackBgScreenBtn" class="toggle-button w-full px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200">
                                    Black Background (Screen)
                                </button>
                            </div>
                            <button id="advancedBlendToggle" class="toggle-button w-full px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200 mb-3">
                                Advanced Blend Modes
                            </button>
                            <div class="hidden" id="advancedBlendOptions">
                                <select id="blendModeSelect" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                    <option value="normal">Normal</option>
                                    <option value="multiply">Multiply</option>
                                    <option value="screen">Screen</option>
                                    <option value="overlay">Overlay</option>
                                    <option value="darken">Darken</option>
                                    <option value="lighten">Lighten</option>
                                    <option value="color-dodge">Color Dodge</option>
                                    <option value="color-burn">Color Burn</option>
                                    <option value="hard-light">Hard Light</option>
                                    <option value="soft-light">Soft Light</option>
                                    <option value="difference">Difference</option>
                                    <option value="exclusion">Exclusion</option>
                                    <option value="hue">Hue</option>
                                    <option value="saturation">Saturation</option>
                                    <option value="color">Color</option>
                                    <option value="luminosity">Luminosity</option>
                                </select>
                            </div>
                        </div>

                        <!-- Global Effects -->
                        <div class="mb-4 sm:mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">Global Effects</h4>
                            <button id="globalInvertToggleBtn" class="toggle-button w-full px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors duration-200">
                                Invert Final Colors (Global)
                            </button>
                        </div>

                        <!-- Layer Manager -->
                        <div class="mb-4 sm:mb-6">
                            <h4 class="text-sm font-medium text-gray-700 mb-3">Layer Management (Drag to Reorder)</h4>
                            <div id="layerManager" class="border border-gray-300 rounded-md p-3 min-h-[120px] sm:min-h-[150px] max-h-[250px] sm:max-h-[300px] overflow-y-auto bg-gray-50">
                                <p class="text-center text-gray-500 text-sm">Please upload images first.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preview Panel -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg shadow-md p-4 sm:p-6">
                        <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-4">Preview</h3>
                        <div id="previewAreaContainer" class="w-full aspect-[4/3] max-h-[400px] sm:max-h-[600px] border-2 border-dashed border-gray-300 rounded-lg mb-6 bg-gray-100 overflow-hidden flex items-center justify-center relative watermark-container">
                            <div id="previewArea" class="w-full h-full relative">
                                <!-- Images will be dynamically added here -->
                            </div>
                            <div id="previewWatermark" class="watermark" style="display: none;">Picgle</div>
                        </div>
                        <button id="downloadButton" class="w-full px-4 py-3 bg-primary text-white rounded-md font-medium hover:bg-primary-dark transition-colors duration-200 flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span>Download Blended Image</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- How to Use Tab -->
        <div id="helpContent" class="tab-content hidden">
            <div class="max-w-4xl mx-auto">
                <div class="mb-8 text-center">
                    <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4">How to Use Picgle</h2>
                    <p class="text-lg text-gray-600">Learn how to create amazing visual effects with our powerful image processing tools</p>
                </div>

                <!-- Decompose Guide -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        Image Decomposition
                    </h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Step-by-Step Guide:</h4>
                            <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                <li>Upload your image using the "Choose File" button</li>
                                <li>Set the number of pieces (5-15, or unlock more by sharing)</li>
                                <li>Choose your decomposition shape: Blocks or Voronoi</li>
                                <li>Adjust block size or Voronoi seed points</li>
                                <li>Select background color and color processing</li>
                                <li>Click "Start Decomposition" to generate layers</li>
                                <li>Download individual layers or use "Download All as ZIP"</li>
                            </ol>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Tips for Best Results:</h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-600">
                                <li><strong>Blocks:</strong> Use smaller block sizes for more detailed decomposition</li>
                                <li><strong>Voronoi:</strong> More seed points create smaller, more intricate patterns</li>
                                <li><strong>Background:</strong> Transparent works best for layering, white/black for special effects</li>
                                <li><strong>Colors:</strong> Try inverted colors for dramatic artistic effects</li>
                                <li>Higher resolution images produce better quality results</li>
                                <li>Large images show progress indicators during processing</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Blend Guide -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        Image Blending
                    </h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Step-by-Step Guide:</h4>
                            <ol class="list-decimal list-inside space-y-2 text-gray-600">
                                <li>Upload multiple images using "Choose Files"</li>
                                <li>Manage layer order by dragging in the Layer Management panel</li>
                                <li>Apply individual layer effects (invert colors)</li>
                                <li>Choose a blend mode or use quick presets</li>
                                <li>Apply global effects if desired</li>
                                <li>Preview your composition in real-time</li>
                                <li>Download the final blended image</li>
                            </ol>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Blend Mode Guide:</h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-600">
                                <li><strong>Normal:</strong> Standard layer stacking</li>
                                <li><strong>Multiply:</strong> Darkens, great for shadows</li>
                                <li><strong>Screen:</strong> Lightens, perfect for highlights</li>
                                <li><strong>Overlay:</strong> Combines multiply and screen</li>
                                <li><strong>Difference:</strong> Creates unique color inversions</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- FAQ Section -->
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-6">Frequently Asked Questions</h3>
                    
                    <div class="space-y-4">
                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>What image formats are supported?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Picgle supports all major image formats including JPEG, PNG, GIF, WebP, and BMP. For best results, we recommend using high-resolution images in PNG or JPEG format.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>How do I unlock more decomposition pieces?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Simply share Picgle on any social media platform using our share buttons! This helps spread the word about our tool and unlocks the ability to create 5-100 pieces instead of the default 5-15 limit.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>How do I use the ZIP download feature?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">After decomposing an image, you'll see a "Download All as ZIP" button. Click it to download all layers in a convenient ZIP file, perfect for archiving or further editing in other software.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>Is my uploaded image data secure?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Yes! All image processing happens directly in your browser. Your images are never uploaded to our servers, ensuring complete privacy and security of your data.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>Can I use Picgle for commercial projects?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Absolutely! Picgle is free to use for both personal and commercial projects. The only requirement is that you retain any watermarks if you choose to enable them.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>What's the difference between Blocks and Voronoi decomposition?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Blocks creates rectangular grid-based patterns, perfect for pixel art effects. Voronoi creates organic, cell-like patterns based on seed points, ideal for natural-looking decompositions. Try both to see which suits your artistic vision!</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>Why does processing large images take time?</span>
                                <svg class="w-5 h-5 faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p class="text-gray-600">Large images contain millions of pixels that need to be processed. Our progress indicators show you the processing status in real-time. The wait is worth it for the high-quality results!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Tab -->
        <div id="aboutContent" class="tab-content hidden">
            <div class="max-w-4xl mx-auto">
                <div class="mb-8 text-center">
                    <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4">About Picgle</h2>
                    <p class="text-lg text-gray-600">Empowering creativity through advanced image processing</p>
                </div>

                <!-- About Section -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Our Mission</h3>
                    <p class="text-gray-600 mb-4">
                        Picgle is a powerful, free online image processing tool designed to make advanced image manipulation accessible to everyone. Whether you're a professional designer, digital artist, or creative enthusiast, Picgle provides the tools you need to transform your images into stunning visual compositions.
                    </p>
                    <p class="text-gray-600 mb-4">
                        Our platform combines cutting-edge image processing algorithms with an intuitive user interface, allowing you to create unique artistic effects through image decomposition and advanced blending techniques. All processing happens directly in your browser, ensuring your privacy and providing instant results.
                    </p>
                    <div class="grid md:grid-cols-2 gap-6 mt-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Key Features:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-600">
                                <li>Advanced image decomposition with blocks and Voronoi patterns</li>
                                <li>Professional layer blending with 16+ blend modes</li>
                                <li>Real-time preview and instant processing</li>
                                <li>ZIP download for batch layer export</li>
                                <li>Progress indicators for large image processing</li>
                                <li>No registration required - completely free</li>
                                <li>Privacy-focused - all processing happens locally</li>
                                <li>Mobile-responsive design for on-the-go editing</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-3">Perfect For:</h4>
                            <ul class="list-disc list-inside space-y-1 text-gray-600">
                                <li>Digital artists and designers</li>
                                <li>Social media content creators</li>
                                <li>Photography enthusiasts</li>
                                <li>Educational and research projects</li>
                                <li>Creative experimentation</li>
                                <li>Commercial design projects</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Contact Section -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">Contact Us</h3>
                    <p class="text-gray-600 mb-4">
                        Have questions, suggestions, or feedback? We'd love to hear from you!
                    </p>
                    <div class="space-y-3">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <span class="text-gray-600">support@www.picgle.org</span>
                        </div>
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-3 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
                            </svg>
                            <span class="text-gray-600">www.picgle.org</span>
                        </div>
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-3 text-primary" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            <span class="text-gray-600">@picgle</span>
                        </div>
                    </div>
                </div>

                <!-- Legal Section -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-3">Privacy Policy</h3>
                        <p class="text-gray-600 text-sm mb-3">
                            Your privacy is important to us. Picgle processes all images locally in your browser - no images are ever uploaded to our servers.
                        </p>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li>â€¢ No personal data collection</li>
                            <li>â€¢ No image storage on our servers</li>
                            <li>â€¢ No tracking cookies</li>
                            <li>â€¢ Complete data privacy</li>
                        </ul>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-bold text-gray-900 mb-3">Terms of Service</h3>
                        <p class="text-gray-600 text-sm mb-3">
                            By using Picgle, you agree to use our service responsibly and in accordance with applicable laws.
                        </p>
                        <ul class="text-gray-600 text-sm space-y-1">
                            <li>â€¢ Free for personal and commercial use</li>
                            <li>â€¢ No warranty provided</li>
                            <li>â€¢ User responsible for content</li>
                            <li>â€¢ Service provided "as is"</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t mt-8 sm:mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8">
            <div class="text-center">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-4">Picgle</h2>
                <p class="text-gray-600 mb-4">Advanced image processing made simple</p>
                <div class="flex justify-center space-x-6 text-sm text-gray-500">
                    <span>&copy; 2025 Picgle. All rights reserved.</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="main.js"></script>
    <script src="decompose.js"></script>
    <script src="blend.js"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7ZWJ5FC5T7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-7ZWJ5FC5T7');
    </script>
    
</body>
</html>
